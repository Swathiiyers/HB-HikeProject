<!-- # @Note: REDUNDANT CODE:
# This piece of code needs to be integrated with the above /search-hike route,
#     created separate button just for testing purpose -->
{% extends 'base.html' %}
{% block title %}Current location{% endblock %}

{% block content %}

{% if "user_name" in session %}
<h2> Hey, {{ session["user_name"] }}</h2>
{% endif %}

<p>Click the button below to search hikes by your current location!</p>

<!-- Button for getting the current Lat-long position.
Upon click, the button prints current latlong on text fields.
Note that this button is outside of the 'form' tags-->

<button id="find-loc" onclick="getLocation()">Click Me!</button><br>


<form action="/search-hike" method="POST" id="loc-radius">


<input type="hidden" name="curr-lat" id="curr-lat"><br>
<input type="hidden" name="curr-long" id="curr-long"><br>


Just one more step to go! <br>
Please select the radius range(in miles) and hit 'Go'!: 
                <select name="radius" required>
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                </select>


<input type="submit" id="go" name="search" value="Go" />

</form>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
<script>

  function getLocation(){
     navigator.geolocation.getCurrentPosition(showPosition);
  }

  function showRadiusDropdown(){
          $("#loc-radius").show();
  }

  function showPosition(position) { 
      document.getElementById("curr-lat").value = position.coords.latitude;
      document.getElementById("curr-long").value = position.coords.longitude;
      showRadiusDropdown();
  }

$("#loc-radius").hide();



</script>

<!-- TODO: Thinking of adding current location on map -->
<!-- <div id="map">           
      <script>
        var map;
        // location San Jose
        map_lat = document.getElementById("curr-lat").value
        map_long = document.getElementById("curr-long").value

        var loc = {lat: map_lat, lng: map_long;
        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            center: loc,
            zoom: 8
          });
        var marker = new google.maps.Marker({
            position: loc,
            map: map
});
        }
      </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAsgrGl18S5YRU8j7W_F25w9J3hFVvxtx0&callback=initMap"
      async defer></script>  
</div> -->


{% endblock %}